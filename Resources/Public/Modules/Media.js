import{a as r,d as h}from"./chunk-TTJLV6PQ.js";var f="prettyembed",m="/_Resources/Static/Packages/Jonnitto.PrettyEmbedPresentation/Scripts/Hls.js?v=1.5.9";function c(t){t.directive("prettyembedmedia",(e,{value:a,modifiers:s,expression:n},{evaluate:o})=>{if(a==="media"){_({element:e,Alpine:t,src:n});return}let d=s.includes("streaming"),i=s.includes("lightbox")?"lightbox":"inline",l={streaming:d,style:i,...o(n||"{}")};y({element:e,Alpine:t,options:l})})}function y({element:t,Alpine:e,options:a}){let{style:s,streaming:n}=a,o={type:null,playing:!1,url:null,id:null,autoplay:!1,loaded:!1,lightbox:s==="lightbox"?!1:null,__media:null},d=n?!g():null;e.bind(t,{"x-data"(){return{...o,play(){if(this.lightbox!==null&&(this.lightbox=!0),!!this.__media?.paused){if(!this.loaded&&n){if(d){if(this.lightbox){setTimeout(()=>{u(this.__media,this.url)},500);return}u(this.__media,this.url);return}this.__media.src=this.url}if(this.lightbox){setTimeout(()=>{this.__media?.play()},500);return}this.__media?.play()}},pause(i=!1){typeof i=="boolean"&&i&&(this.autoplay||this.__media?.muted)||this.__media?.paused||this.__media?.pause()},reset(){this.autoplay||(this.pause(),this.__media?.currentTime&&(this.__media.currentTime=0),this.loaded=!1)},toogle(){if(this.__media.paused){this.play();return}this.pause()},dispatchEvent(i){let l=this.__media.currentTime;l===this.__media.duration&&(i="finished",!this.__media.loop&&!this.lightbox&&!h()&&this.reset()),this.$dispatch(f,{detail:{event:i,currentTime:l,type:this.type,style:s,autoplay:this.autoplay,url:this.url,id:this.id}})},init(){s==="lightbox"&&this.$watch("lightbox",(i,l)=>{!i&&i!==l&&this.pause()})}}},"@prettyembedPauseInternal.window"({detail:i}){i!=this.$root&&this.pause(!0)}})}function _({element:t,Alpine:e,src:a}){let n=t.tagName.toLowerCase()==="video"?"Video":"Audio";e.bind(t,{"x-init"(){this.__media=t,this.url=a||t.currentSrc,this.id=this.url.split("/").pop(),this.autoplay=t.autoplay,this.type=n,this.autoplay&&(this.playing=!0,this.loaded=!0)},"@play"(){this.loaded||(this.loaded=!0),this.playing=!0,!this.autoplay&&!this.muted&&(this.$dispatch("prettyembedPauseInternal",this.$root),this.dispatchEvent("play"))},"@pause"(){this.playing=!1,this.autoplay=!1,this.muted||this.dispatchEvent("pause")}})}function g(){return!!document.createElement("video").canPlayType("application/vnd.apple.mpegurl")}function u(t,e){if(typeof window.Hls<"u"){p(t,e);return}r(m,()=>{setTimeout(()=>p(t,e),10)})}function p(t,e){let a=window.Hls;if(!a||!a.isSupported())return;let s=new a;s.loadSource(e),s.attachMedia(t),s.on(a.Events.MEDIA_ATTACHED,()=>t.play())}window.addEventListener("alpine:init",()=>{window.Alpine.plugin(c)});
