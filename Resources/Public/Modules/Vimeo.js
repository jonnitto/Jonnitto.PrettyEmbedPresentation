import{b as v,d as x}from"./chunk-TTJLV6PQ.js";var $="prettyembed";function V(i){i.directive("prettyembedvimeo",(d,{modifiers:l,expression:s},{evaluate:r})=>{let p=l.includes("lightbox")?"lightbox":"inline",c=l.includes("slim"),n={style:p,slim:c,...r(s||"{}")};E({element:d,Alpine:i,options:n})})}function E({element:i,Alpine:d,options:l}){let s="Vimeo",{style:r,slim:p,video:c,color:n,loop:h,gdpr:P,hash:g,background:k}=l,f=`https://player.vimeo.com/video/${c}`;g&&(f+=`?h=${g}`);let y={url:f,autopip:!0,autoplay:!0,pip:!0,portrait:!1,responsive:!1,title:!1,byline:!1,background:!!k,loop:!!h,autopause:!1,controls:!p};n&&(y.color=n);let m=window.localStorage,w=`jonnittoprettyembed_gdpr_${s.toLowerCase()}`,C={loaded:!1,playing:!1,lightbox:r==="lightbox"?!1:null,gdpr:P&&m.getItem(w)!=="true"?"needCheck":"isAccepted"},e=null;d.bind(i,{"x-data"(){return{...C,init(){this.lightbox!==null&&this.$watch("lightbox",(t,u)=>{!t&&t!==u&&this.pause()})},acceptGdpr(){m.setItem(w,"true"),this.$dispatch("prettyembedAcceptGdpr",s),this.load()},play(){e?.play()},pause(){e?.pause()},load(t){if(t&&t.preventDefault(),this.gdpr!="isAccepted"){this.gdpr="isOpen";return}if(this.lightbox!==null&&(this.lightbox=!0),this.loaded){this.play();return}v(()=>{let u=this.$refs?.vimeo||i;e=new window.Vimeo.Player(u,y);let b=async o=>{let D=[e.getVideoTitle(),e.getVideoId(),e.getVideoUrl(),e.getCurrentTime(),e.getEnded()],a=await Promise.allSettled(D);return a[4].value&&(o="finished",!h&&!this.lightbox&&!x()&&this.reset()),{event:o,type:s,style:r,title:a[0].value,videoID:a[1].value,videoUrl:a[2].value,currentTime:a[3].value}};e.on("play",async()=>{let o=await b("play");this.$dispatch("prettyembedPauseInternal",i),this.loaded=!0,this.playing=!0,this.$dispatch($,o)}),e.on("pause",async()=>{let o=await b("pause");this.playing=!1,this.$dispatch($,o)})})},async reset(){e&&(await this.pause(),await e.destroy(),e=null,this.loaded=!1,this.playing=!1)}}},"@prettyembedAcceptGdpr.window"({detail:t}){t==s&&(this.gdpr="isAccepted")},"@prettyembedPauseInternal.window"({detail:t}){t!=this.$root&&this.pause()}})}var A=!1,I=()=>{A||(window.Alpine.plugin(V),A=!0)};window.addEventListener("prettyembed:init",I);window.addEventListener("alpine:init",I);
