import{c as w,d as v}from"./chunk-TTJLV6PQ.js";var y="prettyembed";function P(e){e.directive("prettyembedyoutube",(a,{modifiers:r,expression:i},{evaluate:n})=>{let l=r.includes("lightbox")?"lightbox":"inline",p={slim:r.includes("slim"),style:l,...n(i||"{}")};I({element:a,Alpine:e,options:p})})}function I({element:e,Alpine:a,options:r}){let i="YouTube",{video:n,playlist:l,style:t,slim:p,loop:g,noCookie:A}=r,d={playerVars:{autoplay:1,modestbranding:1,playsinline:1,rel:0,showinfo:0,controls:p?0:1,loop:g?1:0}};A&&(d.host="https://www.youtube-nocookie.com"),n&&(d.videoId=n),l&&(l.startsWith("PL")||(l="PL"+l),d.playerVars.listType="playlist",d.playerVars.list=l);let b=window.localStorage,m=`jonnittoprettyembed_gdpr_${i.toLowerCase()}`,D={title:r.title,loaded:!1,playing:!1,lightbox:t==="lightbox"?!1:null,gdpr:r.gdpr&&b.getItem(m)!=="true"?"needCheck":"isAccepted"},s=null;a.bind(e,{"x-data"(){return{...D,init(){this.ligtbox!==null&&this.$watch("lightbox",(o,h)=>{!o&&o!==h&&this.pause()})},acceptGdpr(){b.setItem(m,"true"),this.$dispatch("prettyembedAcceptGdpr",i),this.load()},play(){s?.playVideo()},pause(){s?.pauseVideo()},load(o){if(o&&o.preventDefault(),this.gdpr!="isAccepted"){this.gdpr="isOpen";return}if(this.lightbox!==null&&(this.lightbox=!0),this.loaded){this.play();return}w(()=>{let h=this.$refs?.youtube||e,u=window.YT;s=new u.Player(h,{...d,events:{onStateChange:({data:c})=>{setTimeout(()=>{if(c===u.PlayerState.PLAYING){this.$dispatch("prettyembedPauseInternal",e),this.loaded=!0,this.playing=!0,this.$dispatch(y,f({event:"play",type:i,style:t,player:s}));return}if(c===u.PlayerState.PAUSED){this.playing=!1,this.$dispatch(y,f({event:"pause",type:i,style:t,player:s}));return}c===u.PlayerState.ENDED&&(this.playing=!1,!g&&!this.lightbox&&!v()&&this.reset(),this.$dispatch(y,f({event:"finished",type:i,style:t,player:s})))},10)}}})})},reset(){s&&(s?.stopVideo(),s.destroy(),s=null,this.loaded=!1,this.playing=!1)}}},"@prettyembedAcceptGdpr.window"({detail:o}){o==i&&(this.gdpr="isAccepted")},"@prettyembedPauseInternal.window"({detail:o}){o!=this.$root&&this.pause()}})}function f({player:e,type:a,style:r,event:i}){let n,l=0,t={};try{n=e?.getVideoUrl()||null,l=e?.getCurrentTime()||0,t=e?.getVideoData()||{}}catch{}return{event:i,type:a,style:r,title:t?.title,author:t?.author,videoUrl:n,currentTime:l,videoID:t?.video_id,quality:t?.video_quality,playlistID:t?.list||null}}var x=!1,$=()=>{x||(window.Alpine.plugin(P),x=!0)};window.addEventListener("prettyembed:init",$);window.addEventListener("alpine:init",$);
